<!--
	staff_appointment_detail_message_tab

	contains the template that displays the user's sent messages 
	to the ordering physician, sorted in ascending chronological order.

	since meteoric tabs do not support a data object for specified paths,
	this template relies on the following session variables:
		-tab.appointment_id
		-tab.patient_id
		-tab.physician_id

-->

<template name="client_appointment_detail_message_tab">

	{{#contentFor "headerButtonLeft"}}
		{{!--
		{{#ionItem path="list"}}
		{{> ionIcon icon="ios-arrow-left"}}
		{{/ionItem}}
		--}}
	{{/contentFor}}

	{{#contentFor "headerButtonRight"}}
		{{> toggle_button}}
		<!--{{> atNavButton}}-->
	{{/contentFor}}

	{{#contentFor "headerTitle"}}
		<h5 class="title" style="font-size:1em">PATIENT MESSAGES</h5>
	{{/contentFor}}

	{{#ionContent class="padding" id="test_id"}}
		{{> common_info_card}}
	  <!--  <div class="list card">

                <a href="#" class="item item-icon-left">
                    <h1><i class="icon ion-person"></i>{{appointment_patient_name}}</h1>
                    DOB: 12-15-1982 // MRN: 12345678
                  
                </a>
                <div class="item item-body">
                    
                    <img src="radiology_US.png">    
                    
                    
                    <div class="row">
                      <div class="col col-10" style="text-align:right"><b>Exam:</b></div>
                      <div class="col col-90">{{appointment_type}}</div>
                    </div>
                    <div class="row">
                      <div class="col col-10" style="text-align:right"><b>History:</b></div>
                      <div class="col col-90">{{appointment_reason}}</div>
                    </div>
                </div>

        </div>-->
	
		{{#if has_messages}}
			{{#each message_list}}
			    <div class="card">
                    <div class="item item-text-wrap {{message_sender_style_class}}">
                        <div class="row">
                            <div class="col col-50" style="text-align:left">
                                <button class="button button-outline button-stable">
                                  <p>{{message_date}}</p>
                                </button>
                            </div>
                            <div class="col col-50" style="text-align:right">
                                {{#if message_read_by_staff}}
                                    <button class="button button-outline button-balanced">
                                      READ BY STAFF
                                    </button>
                                    <!--<p class="message_read_label">READ BY PATIENT</p>-->
                                {{/if}}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-90" style="text-align:left"><br/>{{message_text}}</div>
                        </div>
                    </div>
                </div>
			{{/each}}
		{{else}}
            <div class="card">
                <div class="item item-text-wrap">
                    <button class="button button-clear button-energized">
                      NO MESSAGES YET
                    </button>
                </div>
            </div>
        {{/if}}
        <div class="item item-input-inset">
            <label class="item-input-wrapper">
                <textarea id="message_box" type="text" placeholder="Messages"></textarea>
            </label>
        <button class="button button-large button-positive send_message">
            Send
            </button>
        </div>
  
	{{> message_listener}}
	{{/ionContent}}

	{{> client_tab_bar}}
</template>